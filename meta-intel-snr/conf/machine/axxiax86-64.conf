#@TYPE: Machine
#@NAME: axxiax86-64
#@DESCRIPTION: Machine configuration for INTEL Axxia x86_64 systems (Intel Core i7 CPU and later) with MMX, SSE, SSE2, SSE3, and SSSE3 instruction set support. Supports a moderately wide range of drivers that should boot and be usable on "typical" hardware.

require conf/machine/intel-corei7-64.conf

DEFAULTTUNE = "core2-64"

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto"
PREFERRED_VERSION_linux-yocto ?= "4.9%"

MACHINEOVERRIDES =. "intel-x86-common:"

MACHINE_FEATURES_append = " ext3"

KARCH = "x86_64"
KERNEL_IMAGETYPE = "bzImage"
KEEPUIMAGE = "no"

SNR_SERIAL_CONSOLE ?= "ttyS4"
APPEND = "console=tty0 console=${SNR_SERIAL_CONSOLE},115200 intel_iommu=on idle=poll"
GRUB_SERIAL = "console=${SNR_SERIAL_CONSOLE},115200"

WKS_FILE = "${@bb.utils.contains_any("EFI_PROVIDER", "systemd-boot rmc-boot", \
	     "systemd-bootdisk-microcode-${SNR_SERIAL_CONSOLE}.wks", "mkefidisk.wks", d)}"

DEFAULTTUNE_virtclass-multilib-lib32 = "core2-32"
MULTILIBS = "multilib:lib32"

IMAGE_FSTYPES += " hddimg"
IMAGE_FSTYPES += " ext2"
IMAGE_FSTYPES += " tar.gz"
IMAGE_FSTYPES += " iso"
NOISO = "0"
